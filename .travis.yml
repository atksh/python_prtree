language: python
dist: bionic
compiler:
- gcc
jobs:
  include:
  - services: docker
  - os: osx
    language: shell
env:
  global:
  - OMP_NUM_THREADS=4
  - CIBW_BUILD="cp3?-*"
  - CIBW_SKIP="cp27-* *-win *-manylinux_i686"
  - CIBW_BEFORE_BUILD="pip install pybind11"
  - TWINE_USERNAME=__token__
  - secure: epbwbr8ddhZLfvXzovgSH49yR99wpmjJUkAG/xRauugxuxzyzbA3/TTS2c21G46AXGRqnWVXovy5abqyuvFWRCAsfQshIuK6LiuW03WDrdw2V6A/0HZL1X7wEOytBTF26plVzsOBZp8KridRjedATI//1Wrs+Iuupoerf+tHe9SZ4nSkNSRUb2QE1isJPM2tVqy0hFxzUgMF4A/HfsSA8dqQ4MtNL3g1VhGW/Gj0LNtbpRU1rMV0+PxRmj2XO+FuzRMK3SybP87fnnzlluV16Cj1X76nzA9D9vEAkVwij+kWYFKkVJAUrwlkO4BS3Vsf3Hqbf0EwG5VGMUNUov6r+XmuCVLQBh5beauEEOQWNG6U1HWluD+XOw8gfPiVVRQAy1NCaGyR9pQ/Tpv/MptQh6b+nQgUg6x53JetSBUFJ+ktJqm2sCZ2PmtF8IIv8R7G2xnShSzEjPStt1BDsrghU1FfuqpaLc3pJLTQf9BzDIsejqPQgKWWspaRs6EMVGwa18+wA8MEtFPH3LjGksMVxFpP0Eoot9vJc5yd8beEdT7uxxj3Kt2XJfwOCf0rxWC8MxXWpsl+LFbmx9EYJj38eELA/G+wqgrNcctPQXMNfqAft3yOuAgTqQ0LRStS0Irw25O+vHytoMPCvy99QjQzI8XZozIJUeNFSHP1iz1iI+A=
install:
- python3 -m pip install cibuildwheel
script:
- python3 -m cibuildwheel --output-dir wheelhouse
after_success:
- |
  if [[ $TRAVIS_TAG ]]; then
    python3 -m pip install twine
    python3 -m twine upload wheelhouse/*.whl
  fi
